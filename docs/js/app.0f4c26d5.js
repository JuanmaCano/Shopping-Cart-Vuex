(function(t){function e(e){for(var n,i,u=e[0],a=e[1],s=e[2],l=0,p=[];l<u.length;l++)i=u[l],Object.prototype.hasOwnProperty.call(c,i)&&c[i]&&p.push(c[i][0]),c[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);d&&d(e);while(p.length)p.shift()();return o.push.apply(o,s||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,u=1;u<r.length;u++){var a=r[u];0!==c[a]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},c={app:0},o=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],a=u.push.bind(u);u.push=e,u=u.slice();for(var s=0;s<u.length;s++)e(u[s]);var d=a;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"10d0":function(t,e,r){},"2a3f":function(t,e,r){"use strict";var n=r("10d0"),c=r.n(n);c.a},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container mt-5",attrs:{id:"app"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-md-6 border-right"},[r("AppProductList")],1),r("div",{staticClass:"col-12 col-md-6"},[r("AppShoppingCart")],1)]),r("hr"),r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("AppProductEdit")],1)])])},o=[],i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h6",[t._v("Listado de productos")]),r("hr"),t._l(t.productsOnStock,(function(e){return r("div",{key:e.id,staticClass:"row justify-content-between px-2"},[r("span",[r("i",{staticClass:"fas fa-edit mr-2 text-secondary pointer",on:{click:function(r){return t.setSelectedProduct(e)}}}),t._v(" "+t._s(e.title)+" ")]),r("span",[t._v(t._s(e.price)+"€")]),r("span",[t._v(t._s(e.inventory))]),r("span",{staticClass:"text-success pointer",on:{click:function(r){return t.addToCart(e)}}},[r("i",{staticClass:"fas fa-shopping-cart"})])])}))],2)},u=[],a=r("5530"),s=(r("96cf"),r("1da1")),d=r("2f62"),l={name:"AppProductList",created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getProducts();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},methods:Object(a["a"])(Object(a["a"])({},Object(d["b"])(["addToCart","getProducts"])),Object(d["d"])(["setSelectedProduct"])),computed:Object(a["a"])({},Object(d["c"])(["productsOnStock"]))},p=l,f=(r("fbbb"),r("2877")),m=Object(f["a"])(p,i,u,!1,null,null,null),v=m.exports,h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-right"},[r("h6",[t._v("Carrito")]),r("hr"),t._l(t.cartItems,(function(e,n){return r("div",{key:e.id},[t._v(" "+t._s(e.title)+" ("+t._s(e.quantity)+") "),r("span",{staticClass:"ml-2 pointer",on:{click:function(e){return t.removeItem(n)}}},[r("i",{staticClass:"fas fa-trash-alt text-danger"})]),r("hr")])})),t.cartItems.length?r("button",{staticClass:"my-3 btn btn-success",on:{click:t.checkOut}},[t._v("CheckOut")]):t._e(),r("h5",[t._v("Total "+t._s(t.cartTotal||0))]),t.$store.state.checkOutError?r("div",{staticClass:"alert alert-danger text-center",attrs:{role:"alert"}},[t._v(" Error procesando los artículos ")]):t._e()],2)},b=[],P=(r("fb6a"),r("b680"),r("ac1f"),r("5319"),/(\d{3})(?=\d)/g);function y(t,e,r){if(t=parseFloat(t),!isFinite(t)||!t&&0!==t)return"";e=null!=e?e:"$",r=null!=r?r:2;var n=Math.abs(t).toFixed(r),c=r?n.slice(0,-1-r):n,o=c.length%3,i=o>0?c.slice(0,o)+(c.length>3?",":""):"",u=r?n.slice(-1-r):"",a=t<0?"-":"";return a+i+c.slice(o).replace(P,"$1,")+u+e}var g={name:"AppShoppingCart",methods:{removeItem:function(t){this.$store.dispatch("removeItemFromCart",t)},checkOut:function(){this.$store.dispatch("checkOut")}},computed:{cartItems:function(){return this.$store.getters.productsOnCart},cartTotal:function(){return y(this.$store.getters.cartTotal," €")}}},O=g,C=(r("2a3f"),Object(f["a"])(O,h,b,!1,null,"1f2d55f0",null)),_=C.exports,k=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",[r("h6",[t._v("Editing product title ...")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input-group",attrs:{type:"text",placeholder:"Seleccionar producto"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])])},x=[],j={computed:{selectedProduct:function(){return this.$store.getters.selectedProduct},title:{get:function(){return this.$store.getters.selectedProduct.title},set:function(t){return this.$store.commit("editProduct",{title:t})}}}},w=j,S=Object(f["a"])(w,k,x,!1,null,null,null),T=S.exports,$={name:"App",components:{AppProductList:v,AppShoppingCart:_,AppProductEdit:T}},E=$,A=Object(f["a"])(E,c,o,!1,null,null,null),I=A.exports,q=(r("4de4"),r("7db0"),r("c740"),r("d81d"),r("13d5"),r("a434"),r("d3b7"),r("c975"),[{id:1,title:"iPad Air 4",price:649,inventory:7},{id:2,title:"iPhone 12",price:1199,inventory:10},{id:3,title:"PlayStation 5",price:399.99,inventory:5}]),F={getProducts:function(t){setTimeout((function(){return t(q)}),100)},buyProducts:function(t,e,r){setTimeout((function(){Math.random()>.5||navigator.userAgent.indexOf("PhantomJS")>-1?e():r()}),100)}};n["a"].use(d["a"]);var M=new d["a"].Store({strict:!0,state:{products:[],cart:[],checkOutError:!1,selectedProduct:{}},mutations:{setProducts:function(t,e){t.products=e},incrementProductQty:function(t,e){e.quantity++},addProductToCart:function(t,e){t.cart.push({id:e.id,quantity:1})},decrementProductQty:function(t,e){e.inventory--},removeProductFromCart:function(t,e){t.cart.splice(e,1)},incrementProductInventory:function(t,e){var r=t.products.find((function(t){return t.id===e.id}));r.inventory+=e.quantity},emptyCart:function(t){t.cart=[]},setCheckOutError:function(t,e){t.checkOutError=e},setSelectedProduct:function(t,e){t.selectedProduct=e},editProduct:function(t,e){var r=t.products.findIndex((function(e){return e.id===t.selectedProduct.id})),c=Object.assign({},t.products[r],e);n["a"].set(t.products,r,c)}},actions:{getProducts:function(t){var e=t.commit;return new Promise((function(t){F.getProducts((function(r){e("setProducts",r),t()}))}))},addToCart:function(t,e){if(0!==e.inventory){var r=t.state.cart.find((function(t){return t.id===e.id}));r?t.commit("incrementProductQty",r):t.commit("addProductToCart",e),t.commit("decrementProductQty",e)}},removeItemFromCart:function(t,e){var r=t.state.cart[e];t.commit("removeProductFromCart",e),t.commit("incrementProductInventory",r)},checkOut:function(t){var e=t.commit,r=t.state;F.buyProducts(r.cart,(function(){e("emptyCart"),e("setCheckOutError",!1)}),(function(){e("setCheckOutError",!0)}))}},getters:{productsOnStock:function(t){return t.products.filter((function(t){return t.inventory>0}))},productsOnCart:function(t){return t.cart.map((function(e){var r=t.products.find((function(t){return t.id===e.id}));return{title:r.title,price:r.price,quantity:e.quantity}}))},cartTotal:function(t,e){return e.productsOnCart.reduce((function(t,e){return t+e.price*e.quantity}),0)},selectedProduct:function(t){return t.selectedProduct}},modules:{}});r("ab8b");n["a"].config.productionTip=!1,new n["a"]({store:M,render:function(t){return t(I)}}).$mount("#app")},7811:function(t,e,r){},fbbb:function(t,e,r){"use strict";var n=r("7811"),c=r.n(n);c.a}});
//# sourceMappingURL=app.0f4c26d5.js.map